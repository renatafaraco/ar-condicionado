<!DOCTYPE html>
<html lang="en">
<head>
	<script src="https://use.fontawesome.com/a76524d5a6.js"></script>
	<link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet"> 
	<meta charset="UTF-8">
	<title>Controle de Condicionador de ar</title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">
	
</head>
<body style="font-family: 'Roboto', sans-serif">
<div class="container justify-content-center">
  	<h1><i class="fa fa-thermometer-full" aria-hidden="true"></i> Controle de Refrigeração</h1>
  		<hr class="my-4">
</div>
<div clas="container alerta">
	<div class="row justify-content-center">
  		<span id="alerta"> Comando enviado com sucesso!</span>
  	</div>
</div>
<div clas="container" style="margin-top: 30px">
	<div class="row justify-content-center">
  		Temperatura atual: <span id="temperatura">0</span> °C
  	</div>
</div>
<div clas="container" style="margin-top: 30px">
  	<div class="row justify-content-center">
  		<h3>Comandos disponíveis:</h3>
  	</div>
   	<div class="row justify-content-center">
		<div class="col-sm-2">
	      <button type="button" class="btn btn-primary btn-sm btn-block" id="botaoLigar">Ligar</button>
	    </div>
	    <div class="col-sm-2">
	      <button type="button" class="btn btn-primary btn-sm btn-block" id="botaoDesligar">Desligar</button>
	    </div>
	</div>
  	<div class="row justify-content-center" style="margin-top: 10px">
	    <div class="col-sm-2">
	      <input type="text" class="form-control" placeholder="°C" id="inputTemp">
	    </div>
	    <div class="col-sm-2">
			<button type="button" class="btn btn-primary btn-sm btn-block" id="botaoEnviarTemp">Enviar temperatura</button>
	    </div>
	</div>
</div>
<div clas="container" style="margin-top: 30px">
	<div class="row justify-content-center">
  		<h3>Agendar funcionamento:</h3>
  	</div>
   	<div class="row justify-content-center">
		<div class="col-sm-2">
	      <p>Ligar às:</p>
	    </div>
	    <div class="col-sm-2">
	      <input type="text" class="form-control" placeholder="00:00">
	    </div>
	</div>
  	<div class="row justify-content-center">
	    <div class="col-sm-2">
	      <p>Desligar às:</p>
	    </div>
	    <div class="col-sm-2">
			<input type="text" class="form-control" placeholder="00:00">
	    </div>
	</div>
	<div class="row justify-content-center">
		<div class="col-sm-4">
			<button type="button" class="btn btn-primary btn-sm btn-block">Enviar configurações</button>
		<div>
	</div>
</div>




<!-- Bootstrap scripts -->
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>
<script type="text/javascript">
	document.addEventListener("DOMContentLoaded", function(event) {
		console.log("Carregamento total da DOM");
		var connection = new WebSocket('ws://' + location.hostname + ':81/', ['arduino']);
		connection.onopen = function() {
			connection.send('#oi arduino!');
			console.log('mandou: #oi arduino!');
		}
		connection.onerror = function(error) {
			console.log('Websocket error', error);
		}
		connection.onmessage = function(evt) {
			console.log('mensagem recebida: ', evt.data)
		}

		var buttonLigar = document.getElementById("botaoLigar");
		button.addEventListener("click", function(event) {
			connection.send('#Ligar');
			console.log("Enviou ligar");
		});

		var buttonDesligar = document.getElementById("botaoDesligar");
		button.addEventListener("click", function(event) {
			connection.send('#Desligar');
			console.log("Enviou desligar")
		});


		var buttonDesligar = document.getElementById("botaoEnviarTemp");
		button.addEventListener("click", function(event) {
			connection.send('#Setar#' + document.getElementById("inputTemp").value);
			console.log("Enviou temperatura " + document.getElementById("inputTemp").value)
		});

	});
</script>
</body>
</html>